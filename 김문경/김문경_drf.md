# ğŸ—“ï¸11ì›” 24ì¼ 1íšŒì°¨

## ğŸ§©ì™œ REST ë°©ì‹ì˜ ì„œë²„ë¥¼ êµ¬ì¶•í•´ì•¼í•˜ëŠ”ì§€

ì¥ê³ , ìŠ¤í”„ë§ê³¼ ê°™ì€ **ì›¹ í”„ë ˆì„ì›Œí¬**ëŠ” ë¸Œë¼ìš°ì €(í¬ë¡¬, íŒŒì´ì–´í­ìŠ¤, ì‚¬íŒŒë¦¬)ë¡œ ì ‘ì†í•˜ëŠ” **ì›¹ì‚¬ì´íŠ¸**ë¥¼ ë§Œë“œëŠ” ê²ƒì— ìµœì í™”

ì‹œê°„ì´ ì§€ë‚˜ê³  ëª¨ë°”ì¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë°œë‹¬ë˜ë©´ì„œ ë°ìŠ¤í¬íƒ‘ ë¿ ì•„ë‹ˆë¼ ìŠ¤ë§ˆíŠ¸í°, íƒœë¸”ë¦¿ í™˜ê²½ë„ ëŠ˜ì–´ë‚¨

ìŠ¤ë§ˆíŠ¸í°ì—ì„œëŠ” ì›¹ì‚¬ì´íŠ¸ë¥¼ í†µí•œ ì ‘ê·¼ë„ ì¤‘ìš”í•˜ì§€ë§Œ **ì–´í”Œë¦¬ì¼€ì´ì…˜**ì— ëŒ€í•œ ì ‘ê·¼ë„ ì¤‘ìš”í•´ì§

ğŸ‘‰ ì—¬ëŸ¬ê°€ì§€ í´ë¼ì´ì–¸íŠ¸ë“¤ì˜ ì‚¬ìš© ë°©ì‹, ì‚¬ìš© ê²½í—˜ ìì²´ê°€ ë‹¤ë³€í™”ë˜ë©´ì„œ **ë©€í‹°í”Œë«í¼ ëŒ€ì‘**ì— ëŒ€í•œ ì¤‘ìš”ì„±ì´ êµ‰ì¥íˆ ë†’ì•„ì§

ê·¸ëŸ°ë° ë©€í‹°í”Œë«í¼ ëŒ€ì‘ì´ ì¥ê³  í•˜ë‚˜ë¡œëŠ” í˜ë“¦

ì´ì „ì—ëŠ” í”„ë¡ íŠ¸ì—”ë“œë¥¼ html, css, jsë¡œ ìœ ì € ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„

> ë°ìŠ¤í¬íƒ‘ ë¿ ì•„ë‹ˆë¼ ëª¨ë°”ì¼ê¹Œì§€ ì•„ìš°ë¥´ê¸° ìœ„í•´ RESTë¥¼ ì‚¬ìš©í•œë‹¤!

<br>

## ğŸ§©RESTë€ ë¬´ì—‡ì¼ê¹Œ?

1. HTTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•œë‹¤.
2. ìì› ê´€ë¦¬ê°€ í¸í•˜ë‹¤.(ê²Œì‹œê¸€, ìœ ì € ë°ì´í„° ë“±)
3. í”Œë«í¼ì— ë…ë¦½ì ì´ì–´ì•¼ í•œë‹¤.(ì¢…ì†ì  X)

![image-20221125213105468](ê¹€ë¬¸ê²½_drf.assets/image-20221125213105468.png)

ê¸°ì¡´ ì¥ê³ ì—ì„œ ì‚¬ìš©í•  ë•ŒëŠ” Modelê³¼ Templateì´ ì—°ê²°ë¼ìˆì—ˆìŒ, ë¶„ë¦¬ê°€ ì•ˆ ë¨

ì›¹ë§Œ ë§Œë“ ë‹¤ë©´ ìƒê´€ì—†ì§€ë§Œ, ìœ ì €ê°€ íƒ¬í”Œë¦¿ì— ì ‘ê·¼í• ë•Œ ëª¨ë°”ì¼ë¡œ ì ‘ê·¼í•œë‹¤ë©´ ê¸°ì¡´ Djangoë¡œëŠ” ëŒ€ì‘ì´ ì–´ë µë‹¤.

#### â“ë¶„ë¦¬ê°€ ì•ˆ ëœë‹¤?

í”„ë¡ íŠ¸ì™€ í˜‘ì—… ì‹œ í”„ë¡ íŠ¸ê°€ Reactë¥¼ ì“°ë ¤ê³  í•œë‹¤ë©´ ë°ì´í„°ë¥¼ ê¸°ì¡´ì˜ ì¿¼ë¦¬ì…‹ìœ¼ë¡œ ì£¼ë©´ ì•ˆë˜ê³  JSONìœ¼ë¡œ ì¤˜ì•¼í•¨

ì´ì „ì—ëŠ” ë°±ì—”ë“œì—ì„œ ë³´ë‚¸ ì •ë³´ë¥¼ í”„ë¡ íŠ¸ì—ì„œ ë°›ì„ ë•Œ

`{% for article in articles %}` ì´ëŸ°ì‹ìœ¼ë¡œ ì‚¬ìš©í–ˆëŠ”ë°

ë¬¸ì œëŠ” ì´ëŠ” HTML, JSê°€ ì•„ë‹Œ **DTL**ì´ë‹¤.

ì¦‰, í”„ë¡ íŠ¸ë„ ì •ë³´ë¥¼ ë°›ê¸° ìœ„í•´ Djangoë¥¼ ì–´ëŠì •ë„ ì•Œì•„ì•¼ í•˜ê±°ë‚˜ ë°±ì—”ë“œê°€ í”„ë¡ íŠ¸ë¥¼ ëŒ€ì‹ í•´ì„œ ì´ ë¬¸ë²• ì •ë„ëŠ” ì¨ë†”ì•¼ í•  ìˆ˜ ìˆë‹¤.

ì´ë ‡ê²Œ ë˜ë©´, ì—ëŸ¬ ë°œìƒ ì‹œ ì„œë¡œ ëŠì„ì—†ì´ ì—°ë½í•˜ê³  ì½”ë“œë¥¼ í•©ì¹˜ê³  ê³ ì¹˜ëŠ” ì¼ì´ ì¦ì•„ì§€ë©´ì„œ ê°œë°œ ì†ë„ê°€ ëŠë ¤ì§ˆ ê²ƒ!

> ì‘ì—…ì˜ íš¨ìœ¨ì„±ì„ ë†’ì´ê¸° ìœ„í•´ì„œëŠ” í”„ë¡ íŠ¸ì™€ ë°±ì´ ì™„ì „íˆ êµ¬ë³„ì´ ë˜ëŠ” ê²ƒì´ ì´ìƒì 

![image-20221128162345544](ê¹€ë¬¸ê²½_drf.assets/image-20221128162345544.png)

ì°¸ê³ ìë£Œ: https://medium.com/@whj2013123218/django-rest-api%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1%EA%B3%BC-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95-a95c6dd195fd

<br>

## ğŸ§©DRF ì‚¬ìš©ë²•

> ê³µì‹ë¬¸ì„œ: https://www.django-rest-framework.org/

### âœ”ï¸ì´ˆê¸° ì„¸íŒ…

í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

```python
pip install djangorestframework
pip install markdown # browsable API ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
```

settingsì— app ì¶”ê°€

```python
INSTALLED_APPS = [
    ...
    'rest_framework',
]
```

ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ viewë„ í•„ìš”í•˜ë‹ˆê¹Œ í”„ë¡œì íŠ¸ì˜ urls.pyì— ì¶”ê°€

```python
urlpatterns = [
    ...
    path('api-auth/', include('rest_framework.urls'))
]
```

api-authì˜ loginìœ¼ë¡œ ë“¤ì–´ê°€ë³´ë©´?

![image-20221128161740931](ê¹€ë¬¸ê²½_drf.assets/image-20221128161740931.png)

> DRFì—ì„œ ì œê³µí•´ì£¼ëŠ” ë¡œê·¸ì¸ í˜ì´ì§€ ë‚˜ì˜´!

<br>

### âœ”ï¸accounts

accounts ì•± í•˜ë‚˜ ë§Œë“¤ê³  root urls.pyì™€ accountsì˜ urls.py ê´€ë¦¬

```python
urlpatterns = [
    ...
    path('accounts/', include('accounts.urls')),
]
```

ê¸°ì¡´ë°©ì‹ ì‘ì„±ë²• vs DRF ì‘ì„±ë²•

```python
from django.shortcuts import render
from django.http import HttpResponse
from rest_framework.response import Response
from rest_framework.decorators import api_view

# ê¸°ì¡´ ì¥ê³  ë°©ì‹; í•¨ìˆ˜
def hello_world(request):
    return HttpResponse('Hello, world!')

# DRF ë°©ì‹
@api_view()
def hello_world_drf(request):
    return Response({"message": "Hello, world!"})
```

> rest_frameworkì˜ **Response**ë¥¼ ì‚¬ìš©í•˜ê³  **json** í˜•ì‹ìœ¼ë¡œ ê°’ì„ ë³´ë‚´ì¤Œ
>
> ë‚´ì¥ ë°ì½”ë ˆì´í„°ì¸ **api_view()**ë„ ì‚¬ìš©

![image-20221128171249940](ê¹€ë¬¸ê²½_drf.assets/image-20221128171249940.png)

> hello_world_drf urlë¡œ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ ìœ„ì™€ ê°™ì€ ì‚¬ì´íŠ¸ í™”ë©´ì´ ë‚˜ì˜´
>
> ë”°ë¡œ ë””ìì¸ì„ ë§Œë“¤ì–´ ë†“ì§€ ì•Šì•˜ì–´ë„ ì´ë ‡ê²Œ ìë™ìœ¼ë¡œ ëœ¸ ğŸ‘‰browsable API

<br>

## ğŸ§©CRUD êµ¬í˜„ ë°©ë²•

ì—¬ëŸ¬ê°€ì§€ê°€ ì¡´ì¬

> APIView, Mixins, Generic CBV, ViewSet ë“±

### â­APIView

#### â“Serializerë€

ê¸°ì¡´ Djangoì—ì„œ í”í•˜ê²Œ í™œìš©ë˜ëŠ” **Form**ê³¼ ë§¤ìš° ìœ ì‚¬í•œ ê°œë…

ë‘˜ ë‹¤ ëª¨ë‘ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ê±°ì³ì„œ modelë¡œë¶€í„° fieldë¥¼ ì½ì–´ì˜¤ëŠ”ë°

Formì€ HTML formì„ ìƒì„±í•˜ëŠ” ê²ƒì— ë°˜í•´, SerializerëŠ” **JSON** ë¬¸ìì—´ì„ ìƒì„±

<br>

#### âœ”ï¸íŠ¹ì§•

ì›í•˜ëŠ” HTTP methodë¥¼ **ì»¤ìŠ¤í„°ë§ˆì´ì§•**í•  ìˆ˜ ìˆì§€ë§Œ

ê·¸ë§Œí¼ ì½”ë“œê°€ ë” ê¸¸ì–´ì§€ê³ , ë²ˆê±°ë¡œì›Œì§ˆ ìˆ˜ ìˆìŒ

> https://www.django-rest-framework.org/tutorial/3-class-based-views/

<br>

#### âœ”ï¸ê¸°ë³¸ ì½”ë“œ

```python
class Class_name(APIView):
	def method_name(self, request, format=None):
    	# í•´ë‹¹ HTTP methodë¥¼ ì–´ë–»ê²Œ ë™ì‘ì‹œí‚¤ê³  ì²˜ë¦¬í• ì§€ ê°œë°œìê°€ ì •ì˜!
```

<br>

#### âœ”ï¸serializer.py

ì£¼ì–´ì§„ ë°ì´í„°ë¥¼ ì§ë ¬í™”í•˜ëŠ” ì—­í• 

```python
from .models import Blog
from rest_framework import serializers

class BlogSerializer(serializers.ModelSerializer):
    class Meta:
        model = Blog
        fields = '__all__'
```

<br>

#### âœ”ï¸views.py

Blogë¥¼ ì˜ˆì‹œë¡œ ë“¤ì–´ì„œ, ì „ì²´ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” **BlogList** í´ë˜ìŠ¤ì™€, ê° ê²Œì‹œê¸€ì„ ë³´ì—¬ì£¼ëŠ” **BlogDetail** í´ë˜ìŠ¤ 2ê°œë¥¼ ì„ ì–¸

```python
# ë°ì´í„° ì²˜ë¦¬
from .models import Blog
from .serializers import BlogSerializer

# APIViewë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ import
from rest_framework.views import APIView
from rest_framework.response import Response
from rest_framework import status
from django.http import Http404

# Blogì˜ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” ì—­í• 
class BlogList(APIView):
    # Blog listë¥¼ ë³´ì—¬ì¤„ ë•Œ
    def get(self, request):
        blogs = Blog.objects.all()
        # ì—¬ëŸ¬ ê°œì˜ ê°ì²´ë¥¼ serializationí•˜ê¸° ìœ„í•´ many=Trueë¡œ ì„¤ì •
        serializer = BlogSerializer(blogs, many=True)
        return Response(serializer.data)

    # ìƒˆë¡œìš´ Blog ê¸€ì„ ì‘ì„±í•  ë•Œ
    def post(self, request):
        # request.dataëŠ” ì‚¬ìš©ìì˜ ì…ë ¥ ë°ì´í„°
        serializer = BlogSerializer(data=request.data)
        if serializer.is_valid(): #ìœ íš¨ì„± ê²€ì‚¬
            serializer.save() # ì €ì¥
            return Response(serializer.data, status=status.HTTP_201_CREATED)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

# Blogì˜ detailì„ ë³´ì—¬ì£¼ëŠ” ì—­í• 
class BlogDetail(APIView):
    # Blog ê°ì²´ ê°€ì ¸ì˜¤ê¸°
    def get_object(self, pk):
        try:
            return Blog.objects.get(pk=pk)
        except Blog.DoesNotExist:
            raise Http404
    
    # Blogì˜ detail ë³´ê¸°
    def get(self, request, pk, format=None):
        blog = self.get_object(pk)
        serializer = BlogSerializer(blog)
        return Response(serializer.data)

    # Blog ìˆ˜ì •í•˜ê¸°
    def put(self, request, pk, format=None):
        blog = self.get_object(pk)
        serializer = BlogSerializer(blog, data=request.data) 
        if serializer.is_valid():
            serializer.save()
            return Response(serializer.data) 
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

    # Blog ì‚­ì œí•˜ê¸°
    def delete(self, request, pk, format=None):
        blog = self.get_object(pk)
        blog.delete()
        return Response(status=status.HTTP_204_NO_CONTENT)  
```

> BlogListëŠ” ì „ì²´ ëª©ë¡ ë³´ì—¬ì£¼ê¸°(GET)ê³¼ ìƒˆ ë¸”ë¡œê·¸ ê°ì²´ ë“±ë¡(POST) ì‚¬ìš©
>
> BlogDetailì€ ê° ê°ì²´ì˜ detail ë³´ì—¬ì£¼ê¸°(GET), ê°ì²´ ìˆ˜ì •í•˜ê¸°(PUT), ê°ì²´ ì‚­ì œí•˜ê¸°(DELETE) ì‚¬ìš©

#### âœ”ï¸urls.py

```python
from django.urls import path
from rest_framework.urlpatterns import format_suffix_patterns
from . import views

urlpatterns =[
    path('blog/', views.BlogList.as_view()),
    path('blog/<int:pk>/', views.BlogDetail.as_view()),
]

urlpatterns = format_suffix_patterns(urlpatterns)
```

```python
from django.contrib import admin
from django.urls import path, include
from project import urls

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('project.urls')),
]
```

<br>

### â­Mixins

#### âœ”ï¸íŠ¹ì§•

APIViewì™€ì˜ ê°€ì¥ í° ì°¨ì´ì ì€ **ë¶ˆí•„ìš”í•œ ì½”ë“œì˜ ì¤‘ë³µ**ì„ ì–¼ë§ˆë‚˜ ì¤„ì¼ ìˆ˜ ìˆëŠ”ê°€

**CBV(Class Based View)**ì˜ **ìƒì†**ì„ í™œìš©í•´ì„œ ì¢€ ë” ê°„ë‹¨í•˜ê²Œ êµ¬í˜„ì´ ê°€ëŠ¥

> https://www.django-rest-framework.org/tutorial/3-class-based-views/#using-mixins

<br>

#### âœ”ï¸views.py

```python
from .models import Blog
from .serializers import BlogSerializer
from rest_framework import generics
from rest_framework import mixins

# Blogì˜ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” ì—­í• 
class BlogList(mixins.ListModelMixin, 
                  mixins.CreateModelMixin, 
                  generics.GenericAPIView):
    queryset = Blog.objects.all()
    serializer_class =BlogSerializer

	# Blog listë¥¼ ë³´ì—¬ì¤„ ë•Œ
    def get(self, request, *args, **kwargs):
        return self.list(request, *args, **kwargs)
	
	# ìƒˆë¡œìš´ Blog ê¸€ì„ ì‘ì„±í•  ë•Œ
    def post(self, request, *args, **kwargs):
        return self.create(request, *args, **kwargs)

# Blogì˜ detailì„ ë³´ì—¬ì£¼ëŠ” ì—­í• 
class BlogDetail(mixins.RetrieveModelMixin,
                     mixins.UpdateModelMixin,
                     mixins.DestroyModelMixin,
                     generics.GenericAPIView):
    queryset = Blog.objects.all()
    serializer_class = BlogSerializer

	# Blogì˜ detail ë³´ê¸°
    def get(self, request, *args, **kwargs):
        return self.retrieve(request, *args, **kwargs)

	# Blog ìˆ˜ì •í•˜ê¸°
    def put(self, request, *args, **kwargs):
        return self.update(request, *args, **kwargs)

	# Blog ì‚­ì œí•˜ê¸°
    def delete(self, request, *args, **kwargs):
        return self.destroy(request, *args, **kwargs)
```

> BlogList, BlogDetail í´ë˜ìŠ¤ë¥¼ ì‚´í´ë³´ë©´, ì¸ìë¡œ mixins.ListModelMixin, mixins.CreateModelMixin ë“±ì„ ë°›ìŒ
>
> drf ê³µì‹ githubì˜ mixins.py ì½”ë“œë¥¼ ë³´ë©´
>
> https://github.com/encode/django-rest-framework/blob/master/rest_framework/mixins.py
>
> ![image-20221129113301295](ê¹€ë¬¸ê²½_drf.assets/image-20221129113301295.png)
>
> ì´ëŸ°ì‹ìœ¼ë¡œ ë¯¸ë¦¬ ì •ì˜ê°€ ë¼ìˆìŒ ğŸ‘‰ ìƒì†ì„ í†µí•´ í¸í•˜ê²Œ í™œìš©
>
> querysetê³¼ serializer_class ì—­ì‹œ ì¸ìë¡œ ìƒì†ë°›ì€ generics.GenericAPIViewì—ì„œ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŒ
>
> https://github.com/encode/django-rest-framework/blob/master/rest_framework/generics.py
>
> ![image-20221129113709818](ê¹€ë¬¸ê²½_drf.assets/image-20221129113709818.png)
>
> í´ë˜ìŠ¤ ìƒì† í›„ querysetê³¼ serializer_classê°€ Noneìœ¼ë¡œ ì„¤ì •ë¼ìˆëŠ”ë°
>
> ì´ë¥¼ ì±„ì›Œì¤€ë‹¤ëŠ” ê°œë…!

<br>

### â­Generic CBV

#### âœ”ï¸íŠ¹ì§•

mixinsë³´ë‹¤ ì½”ë“œ ì¤‘ë³µì„ ë” ì¤„ì¼ ìˆ˜ ìˆìŒ

> https://www.django-rest-framework.org/tutorial/3-class-based-views/#using-generic-class-based-views

mixinsì—ì„œëŠ” generics.pyì˜ **GenericAPIView**ë¥¼ ìƒì†ë°›ì•˜ëŠ”ë°

Generic CBVì—ì„œëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ìŒ

<br>

#### âœ”ï¸views.py

```python
from .models import Blog
from .serializers import BlogSerializer
from rest_framework import generics

# Blogì˜ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” ì—­í• 
class BlogList(generics.ListCreateAPIView):
    queryset = Blog.objects.all()
    serializer_class = BlogSerializer

# Blogì˜ detailì„ ë³´ì—¬ì£¼ëŠ” ì—­í• 
class BlogDetail(generics.RetrieveUpdateDestroyAPIView):
    queryset = Blog.objects.all()
    serializer_class = BlogSerializer
```

> APIViewëŠ” ì—¬ëŸ¬ ì¡°í•©ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ìˆìŒ
>
> ListAPIViewëŠ” ê°ì²´ì˜ ì „ì²´ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” GET
>
> ListCreateAPIViewëŠ” ê°ì²´ ì „ì²´ ëª©ë¡ ë³´ê¸° + ìƒˆë¡œìš´ ê°ì²´ ë“±ë¡ ì´ëŸ°ì‹ì˜ ì¡°í•©ì´ ê°€ëŠ¥
>
> ì¶”ê°€ë¡œ generics.pyì—ì„œ ì‚¬ìš©í•œ í´ë˜ìŠ¤(ex. ListAPIView)ì—ì„œëŠ” **GenericAPIView**ë¥¼ ë‹¤ì‹œ ìƒì†ë°›ê³  ìˆê¸° ë•Œë¬¸ì—
>
> Generic CBVì—ì„œë„ querysetê³¼ serializer_classë¥¼ ë³„ë„ë¡œ ì§€ì •!

<br>

#### â—Detail ë¶€ë¶„

```python
# íšŒì›ê°€ì…
class UserCreate(generics.CreateAPIView):
    queryset = User.objects.all()
    serializer_class = UserSerializer

# ìœ ì € ë””í…Œì¼ ë³´ê¸°
class UserDetail(generics.RetrieveUpdateDestroyAPIView):
    queryset = User.objects.all()
    serializer_class = UserSerializer
    lookup_field = 'pk'
    lookup_url_kwargs = None
```

> Userëª¨ë¸ì˜ íšŒì›ê°€ì…ê³¼ detail(íšŒì› ì •ë³´)ì„ Generic-CBVë¡œ êµ¬í˜„í–ˆëŠ”ë°, ê³„ì† ì—ëŸ¬ê°€ ë–´ìŒ
>
> ![image-20221129162314752](ê¹€ë¬¸ê²½_drf.assets/image-20221129162314752.png)
>
> ğŸ‘‰urlì—ì„œ pkê°’ì„ ì œëŒ€ë¡œ ì„¤ì •ì„ ì•ˆí•´ì¤˜ì„œ ê·¸ëŸ¼
>
> ![image-20221129162342307](ê¹€ë¬¸ê²½_drf.assets/image-20221129162342307.png)
>
> user_pkê°€ ì•„ë‹ˆê³  **pk**ë¡œ ì¨ì•¼ ì—ëŸ¬ê°€ ì•ˆ ë‚¨!

<br>

### â­ViewSets

#### âœ”ï¸íŠ¹ì§•

ìƒì†ì„ ì—¬ëŸ¬ë²ˆ ê±°ì¹œë§Œí¼ ì½”ë“œê°€ ë§¤ìš° ê°„ê²°

> https://www.django-rest-framework.org/tutorial/6-viewsets-and-routers/

<br>

#### âœ”ï¸views.py

```python
from .models import Blog
from .serializers import BlogSerializer
from rest_framework import viewsets

# Blogì˜ ëª©ë¡, detail ë³´ì—¬ì£¼ê¸°, ìˆ˜ì •í•˜ê¸°, ì‚­ì œí•˜ê¸° ëª¨ë‘ ê°€ëŠ¥
class BlogViewSet(viewsets.ModelViewSet):
    queryset = Blog.objects.all()
    serializer_class = BlogSerializer
```

> ![image-20221129163427385](ê¹€ë¬¸ê²½_drf.assets/image-20221129163427385.png)
>
> ModelViewSetì•ˆì— ì´ì „ì— ì‚¬ìš©í–ˆë˜ mixinsì™€ GenericViewSetë¥¼ ìƒì† ë°›ê³  ìˆê³ ,
>
> ![image-20221129164930842](ê¹€ë¬¸ê²½_drf.assets/image-20221129164930842.png)
>
> GenericViewSetì€ ë˜ genericsì˜ GenericAPIViewë¥¼ ìƒì†ë°›ê³  ìˆìŒ

<br>

#### âœ”ï¸urls.py

ViewSetì˜ ê²½ìš°ì—ëŠ” í•˜ë‚˜ì˜ classì— Blog ëª©ë¡ê³¼ detailì„ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ì´ ëª¨ë‘ ì¡´ì¬í•˜ëŠ”ë° í•˜ë‚˜ì˜ path í•¨ìˆ˜ë¡œëŠ” í‘œí˜„í•  ìˆ˜ ì—†ìŒ!

ì™œëƒí•˜ë©´ Blog ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” urlì˜ ê²½ìš°ì—ëŠ” pk ê°’ì´ í•„ìš”ê°€ ì—†ì§€ë§Œ, detailì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ì„œëŠ” pk ê°’ì´ ë°˜ë“œì‹œ í•„ìš”í•˜ê¸° ë•Œë¬¸

> ViewSetì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” **ì„œë¡œ ë‹¤ë¥¸ path í•¨ìˆ˜ë¥¼ í•˜ë‚˜ë¡œ ë¬¶ì–´ì£¼ëŠ” ê³¼ì •**ì´ í•„ìš”í•˜ê³ 
>
> ë‘ê°€ì§€ ë°©ë²•ì´ ì¡´ì¬

##### 1. as_view() í•¨ìˆ˜

í•¨ìˆ˜ì˜ ì¸ìë¡œëŠ” http methodì™€ ì²˜ë¦¬í•  í•¨ìˆ˜ì˜ ì´ë¦„ì„ ì‘ì„±

ì²˜ë¦¬í•  í•¨ìˆ˜ì˜ ì´ë¦„ì€ list, create, retrieve, update, destory ë“±

```python
from django.urls import path
from .views import BlogViewSet

# Blog ëª©ë¡ ë³´ì—¬ì£¼ê¸°
blog_list = BlogViewSet.as_view({
    'get': 'list',
    'post': 'create'
})

# Blog detail ë³´ì—¬ì£¼ê¸° + ìˆ˜ì • + ì‚­ì œ
blog_detail = BlogViewSet.as_view({
    'get': 'retrieve',
    'put': 'update',
    'delete': 'destroy'
})

urlpatterns =[
    path('blog/', blog_list),
    path('blog/<int:pk>/', blog_detail),
]
```

<br>

##### 2. router í™œìš©í•˜ê¸°

rest frameworkì˜ DefaultRouterë¼ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬, mapping í•˜ê³ ì í•˜ëŠ” viewë¥¼ ë“±ë¡

```python
from django.urls import path, include
from .views import BlogViewSet
from rest_framework.routers import DefaultRouter

router = DefaultRouter()
# ì²« ë²ˆì§¸ ì¸ìëŠ” urlì˜ prefix
# ë‘ ë²ˆì§¸ ì¸ìëŠ” ViewSet
router.register('blog', BlogViewSet)

urlpatterns =[
    path('', include(router.urls))
]
```







